name: Build and Publish Artifact
on:
  push:
    branches: release-dev
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Build Docker image
        uses: docker/build-push-action@v2
        with:
          context: .
          push: false
          tags: demo-app:latest

      - name: Export Docker image to tar
        run: docker save -o demo-app.tar demo-app:latest

      - name: Upload artifact
        uses: actions/upload-artifact@v2
        with:
          name: demo-app
          path: demo-app.tar


# name: Build and Publish Artifact
# on:
#   push:
#     branches: release-dev
# jobs:
#   build:
#     runs-on: ubuntu-latest
#     steps:
#       - name: checkout code 
#         uses: actions/checkout@v2

#       - name: Build Docker image
#         uses: docker/build-push-action@v2
#         with:
#           context:
#           push: false
#           tags: demo-app:latest
      
#       - name: Export Docker image to tar
#         run: docker save -o demo-app.tar demo-app:latest

#       - name: Upload artifact
#         uses: actions/upload-artifact@v2
#         with:
#           name: demo-app
#           path demo-app.tar